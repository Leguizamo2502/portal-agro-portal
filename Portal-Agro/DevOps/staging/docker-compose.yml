version: "3.9"

services:
  # ğŸŒ Frontend Portal-Agro - staging
  portal-agro-front-staging:
    container_name: ${CONTAINER_NAME}
    build:
      context: ../..   # raÃ­z del proyecto Angular
      dockerfile: Dockerfile
    image: ${IMAGE_NAME}:latest
    restart: always
    ports:
      - "4200:${PORT}"           # 4200 host â†’ 80 contenedor
    env_file:
      - .env
    networks:
      - portal-agro_network          # ğŸ‘ˆ valor literal, no variable
    labels:
      - com.portal-agro.environment=staging

# ğŸ”— Red externa compartida con backend
networks:
  portal-agro_network:
    external: true