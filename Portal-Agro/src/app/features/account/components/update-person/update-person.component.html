<div class="form-wrapper-transparent">
  <h2 class="titleForm">{{ title }}</h2>

  <form (ngSubmit)="save()" [formGroup]="form" class="form-container">

    <div id="Info-Account-Update">
      <!-- Nombres -->
      <div class="form-field" id="firstName-field">
        <mat-form-field appearance="outline" class="custom-mat-field">
          <mat-label>Nombres</mat-label>
          <input matInput formControlName="firstName" placeholder="Ingresa tus nombres">
          <mat-error *ngIf="f.firstName.hasError('required')">Este campo es obligatorio</mat-error>
          <mat-error *ngIf="f.firstName.hasError('minlength')">Mínimo 2 caracteres</mat-error>
        </mat-form-field>
      </div>

      <!-- Apellidos -->
      <div class="form-field" id="lastName-field">
        <mat-form-field appearance="outline" class="custom-mat-field">
          <mat-label>Apellidos</mat-label>
          <input matInput formControlName="lastName" placeholder="Ingresa tus apellidos">
          <mat-error *ngIf="f.lastName.hasError('required')">Este campo es obligatorio</mat-error>
          <mat-error *ngIf="f.lastName.hasError('minlength')">Mínimo 2 caracteres</mat-error>
        </mat-form-field>
      </div>

      <!-- Teléfono -->
      <div class="form-field" id="phoneNumber-field">
        <mat-form-field appearance="outline" class="custom-mat-field">
          <mat-label>Teléfono</mat-label>
          <input matInput formControlName="phoneNumber" placeholder="Solo dígitos" inputmode="numeric">
          <mat-error *ngIf="f.phoneNumber.hasError('required')">Este campo es obligatorio</mat-error>
          <mat-error *ngIf="f.phoneNumber.hasError('pattern')">Debe tener entre 7 y 15 dígitos</mat-error>
        </mat-form-field>
      </div>
    </div>


    <div id="ubication">
  <!-- Departamento y Ciudad en una sola fila -->
  <div class="row-2cols">

    <!-- Departamento -->
    <mat-form-field id="department-field" appearance="outline" class="custom-mat-field">
      <mat-label>Departamento</mat-label>
      <mat-select formControlName="departmentId" [disabled]="isLoadingDepartments">
        <mat-option *ngFor="let d of departments" [value]="d.id">{{ d.name }}</mat-option>
      </mat-select>
      <mat-hint *ngIf="isLoadingDepartments">Cargando departamentos...</mat-hint>
      <mat-error *ngIf="f.departmentId.hasError('required')">
        Selecciona un departamento
      </mat-error>
    </mat-form-field>

    <!-- Ciudad -->
    <mat-form-field id="city-field" appearance="outline" class="custom-mat-field">
      <mat-label>Ciudad</mat-label>
      <mat-select formControlName="cityId" [disabled]="isLoadingCities || f.cityId.disabled">
        <mat-option *ngFor="let c of cities" [value]="c.id">{{ c.name }}</mat-option>
      </mat-select>
      <mat-hint *ngIf="isLoadingCities">Cargando ciudades...</mat-hint>
      <mat-error *ngIf="f.cityId.hasError('required')">
        Selecciona una ciudad
      </mat-error>
    </mat-form-field>
  </div>

  <!-- Dirección -->
  <div class="form-field">
    <mat-form-field id="address-field" appearance="outline" class="custom-mat-field">
      <mat-label>Dirección</mat-label>
      <input matInput formControlName="address" placeholder="Ingresa tu dirección">
      <mat-error *ngIf="f.address.hasError('required')">Este campo es obligatorio</mat-error>
      <mat-error *ngIf="f.address.hasError('minlength')">Mínimo 4 caracteres</mat-error>
    </mat-form-field>
  </div>
</div>


    <!-- Botones -->
    <div class="form-actions cont-botones" id="actions">
      <app-button [text]="'Guardar'" [icon]="'save'" [type]="'submit'" [disabled]="form.invalid || isLoading"></app-button>
      <app-button [text]="'Cancelar'" [icon]="'cancel'" [color]="'secondary'" (click)="cancel()"></app-button>
    </div>
  </form>
</div>
