<div class="wrapper">
  <h2 class="title">Mis pedidos</h2>

  <!-- prueba cantidad de pedidos -->

  <!-- <app-stat-card
    icon="shopping_cart"
    text="Pedidos"
    [count]="numberOrders"
    color="warning"
    [loading]="loading">
  </app-stat-card> -->
  
  <ng-container *ngIf="!loading; else loadingTpl">
    <div *ngIf="items.length; else emptyTpl" class="list">
      <div class="card" *ngFor="let o of items; trackBy: trackById">
        <div class="row1">
          <div class="prod">{{ o.productName }}</div>
          <span class="chip" [ngClass]="chipClass(o.status)">
            {{ o.status | statusTranslate }}
          </span>
        </div>

        <div class="d-flex d-flex gap-1 justify-content-between">
          <div class="d-flex gap-1"><div class="subtitle">Cant.:</div> <div class="text m-0">{{ o.quantityRequested }}</div> </div>
          <div class="d-flex gap-1"><div class="subtitle">Total:</div> <div class="text m-0">{{ o.total | currency:'COP' }} </div> </div>
          <div class="muted d-flex gap-1"><div class="subtitle m-0">Creado:</div> <div class="text m-0">{{ o.createAt | date:'medium' }}</div></div>
        </div>

        <div class="actions">
          <app-button text="Ver detalle" color="secondary" (clicked)="view(o.code)"></app-button>

          <!-- Subir comprobante -->
          <input type="file" accept="image/*" #uploader hidden (change)="onPickPaymentFile(o.code, $event)" />
          <app-button
            *ngIf="canUploadPayment(o.status)"
            text="Subir comprobante"
            color="primary"
            (clicked)="triggerFile(uploader)">
          </app-button>

          <!-- Cancelar pedido -->
          <app-button
            *ngIf="canCancel(o.status)"
            text="Cancelar"
            color="danger"
            (clicked)="cancel(o.code)">
          </app-button>

          <!-- Confirmar recepción -->
          <app-button
            *ngIf="canConfirm(o.status)"
            text="Confirmar recepción"
            color="primary"
            (clicked)="confirm(o.code)">
          </app-button>
        </div>
      </div>
    </div>
  </ng-container>

  <ng-template #loadingTpl><p class="muted">Cargando…</p></ng-template>
  <ng-template #emptyTpl><p class="muted">Aún no tienes pedidos.</p></ng-template>
</div>
